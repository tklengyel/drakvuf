name: drakvuf
version: '0.8'
summary: DRAKVUF
description: |
    DRAKVUF Black-box binary analysis

grade: devel
confinement: devmode
architectures:
  - build-on: amd64
base: core20

parts:
  drakvuf:
    source: .
    build-snaps:
        - libvmi/latest/edge
    build-packages:
        - autoconf-archive
        - libjson-c-dev
        - libxen-dev
        - build-essential
        - pkg-config
        - libglib2.0-dev
        - clang
    stage-snaps:
        - libvmi/latest/edge
    stage-packages:
        - libjson-c-dev
        - libglib2.0-0
    plugin: autotools
    override-build: |
        export CC=clang
        export CXX=clang++
        autoreconf -vif
        ./configure
        make
